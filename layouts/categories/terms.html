{{ define "main" }}
  {{ .Scratch.Set "scope" "list" }}
  
  <div class="relative w-full py-16">
  
    {{/* Header */}}
    <header class="text-center mb-12">
        {{ if .Params.showBreadcrumbs | default (site.Params.taxonomy.showBreadcrumbs | default false) }}
        {{ partial "breadcrumbs.html" . }}
        {{ end }}
        <style>
          .home-title {
            font-size: 1.5rem !important;
            line-height: 2rem !important;
          }
        
          @media (min-width: 853px) {
            .home-title {
              font-size: 2.25rem !important;
              line-height: 2.5rem !important;
            }
          }
        </style>
        <h1 class="home-title mt-5 font-extrabold text-neutral-800 dark:text-neutral-100">
          {{ .Title }}
        </h1>
    </header>

    <div class="recent-articles-section">
      <div class="flex flex-col lg:flex-row lg:items-start">
        {{/* Main Content Area */}}
        <div class="flex-grow min-w-0">

          {{/* Description (markdown content) */}}
          {{ if .Content }}
          <section class="prose dark:prose-invert max-w-none mb-10 text-center">
            <div class="inline-block text-center w-full max-w-prose">
              {{ .Content }}
            </div>
          </section>
          {{ end }}

          {{/* New Categories Grid (Pill design to match tags) */}}
          <div class="taxonomy-grid-tags">
            {{ range .Data.Terms }}
              {{ $name := .Page.Title }}
              {{ $count := .Count }}
              {{ $url := .Page.RelPermalink }}
              
              {{/* Get Icon based on name */}}
              {{ $icon := "globe" }}
              {{ if eq $name "AI" }}{{ $icon = "wand-magic-sparkles" }}
              {{ else if eq $name "Docker" }}{{ $icon = "docker" }}
              {{ else if eq $name "Git" }}{{ $icon = "github" }}
              {{ else if eq $name "JavaScript" }}{{ $icon = "code" }}
              {{ else if eq $name "セキュリティ" }}{{ $icon = "shield" }}
              {{ else if eq $name "キャリア" }}{{ $icon = "graduation-cap" }}
              {{ else if eq $name "プログラミング学習" }}{{ $icon = "lightbulb" }}
              {{ else if eq $name "Web開発" }}{{ $icon = "globe" }}
              {{ else if eq $name "インフラ" }}{{ $icon = "cloud" }}
              {{ end }}

              <a href="{{ $url }}" class="tag-pill">
                <span class="tag-icon">
                  {{ partial "icon.html" $icon }}
                </span>
                <span class="tag-name">{{ $name }}</span>
                <span class="tag-count">{{ $count }}</span>
              </a>
            {{ end }}
          </div>
        </div>
          
        {{/* Sidebar Area (Desktop: Right, Mobile: Bottom) */}}
        <aside class="w-full lg:w-1/6 lg:ps-8 mt-12 lg:mt-0 flex-shrink-0">
          <div class="lg:sticky lg:top-10">
            {{ partial "popular-articles-sidebar.html" . }}
            {{ partial "categories-sidebar.html" . }}
            {{ partial "imobile-ad.html" . }}
          </div>
        </aside>
      </div>
    </div>
  </div>
{{ end }}
