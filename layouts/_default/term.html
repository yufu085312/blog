{{ define "main" }}
  {{ .Scratch.Set "scope" "term" }}
  
  <div class="relative w-full py-16">
  
    {{/* Header */}}
    <header class="text-center mb-12">
        {{ if .Params.showBreadcrumbs | default (site.Params.term.showBreadcrumbs | default false) }}
        {{ partial "breadcrumbs.html" . }}
        {{ end }}
        <style>
          .home-title {
            font-size: 1.5rem !important;
            line-height: 2rem !important;
          }
        
          @media (min-width: 853px) {
            .home-title {
              font-size: 2.25rem !important;
              line-height: 2.5rem !important;
            }
          }
        </style>
        <h1 class="home-title mt-5 font-extrabold text-neutral-800 dark:text-neutral-100">
          {{ .Title }}
        </h1>
        <div class="mt-1 mb-8 text-base text-neutral-600 dark:text-neutral-400">
          {{ partial "article-meta/term.html" (dict "context" . "scope" "single") }}
        </div>
    </header>

    <div class="recent-articles-section">
      <div class="flex flex-col lg:flex-row lg:items-start">
        {{/* Main Content Area */}}
        <div class="flex-grow min-w-0">

          {{/* Description (markdown content) */}}
          {{ if .Content }}
          <section class="prose dark:prose-invert max-w-none mb-10 text-center">
            <div class="inline-block text-center w-full max-w-prose">
              {{ .Content }}
            </div>
          </section>
          {{ end }}

          {{/* Article Grid */}}
          <div class="text-left">
            {{ if gt .Pages 0 }}
            {{ $cardView := .Params.cardView | default (site.Params.term.cardView | default false) }}
            {{ $groupByYear := .Params.groupByYear | default (site.Params.term.groupByYear | default false) }}
          
            {{ if $cardView }}
            <style>
              .article-card-grid {
                display: grid;
                gap: 1rem;
                grid-template-columns: 1fr;
              }
              @media (min-width: 640px) and (max-width: 1023px) {
                .article-card-grid {
                  grid-template-columns: repeat(2, 1fr);
                }
              }
            </style>
            <section class="w-full article-card-grid">
              {{ range .Paginator.Pages }}
              {{ partial "article-link/card.html" . }}
              {{ end }}
            </section>
            {{ else }}
            <section class="space-y-10 w-full">
              {{ range .Paginator.Pages }}
              {{ partial "article-link/simple.html" . }}
              {{ end }}
            </section>
            {{ end }}
            {{ else }}
              <section class="mt-10 prose dark:prose-invert text-center">
                <p class="py-8 border-t border-neutral-200 dark:border-neutral-700">
                  <em>{{ i18n "term.no_articles" | emojify }}</em>
                </p>
              </section>
            {{ end }}
            </div>

          {{ partial "pagination.html" . }}
          </div>
          
          {{/* Sidebar Area (Desktop: Right, Mobile: Bottom) */}}
          <aside class="w-full lg:w-1/6 lg:ps-8 mt-12 lg:mt-0 flex-shrink-0">
            <div class="lg:sticky lg:top-10">
              {{ partial "popular-articles-sidebar.html" . }}
              {{ partial "categories-sidebar.html" . }}
              {{ partial "imobile-ad.html" . }}
            </div>
          </aside>
      </div>
    </div>
  </div>
{{ end }}
